(($,n)=>{'use strict';const l=tbLocalScript.addons['pro-slider'],r={},d='1.2.1',u=function(t){t.preventDefault();const e=$(this.closest('.slider-pro')).data('sliderPro'),i='#next-slide'===this.getAttribute('href')?'nextSlide':'previousSlide';'object'==typeof e&&e[i].call(e)},p=(t,e)=>{const s=t.getElementsByClassName('bsp_frame')[0];if(t.hasAttribute('data-bg')&&(t.style.backgroundImage='url('+t.getAttribute('data-bg')+')',t.removeAttribute('data-bg')),s){const a=s.getAttribute('data-url'),o=n.parseVideo(a),l=document.createElement('iframe');let t='',e='',i=(e='youtube'===o.type?(t='https://www.youtube.com/embed/'+o.id+'?autohide=1&border=0&wmode=opaque','accelerometer;encrypted-media;gyroscope;picture-in-picture'):(t='//player.vimeo.com/video/'+o.id+'?portrait=0&title=0&badge=0','fullscreen'),a.split('?')[1]);const r=!!i&&new URLSearchParams(i);r&&r.get('autoplay')&&(t+='&autoplay=1',e+=';autoplay'),l.className='tf_abs tf_w tf_h sp-video',l.setAttribute('allowfullscreen',''),l.setAttribute('allow',e),l.setAttribute('src',t),s.parentNode.replaceChild(l,s)}else{const i=t.getElementsByTagName('video')[0];i&&('none'===i.preload?(i.addEventListener('canplay',function(){this.paused&&this.play()},{passive:!0,once:!0}),!0===e.options.autoplay&&!0===e.isTimerRunning&&i.addEventListener('ended',()=>{'normal'===e.settings.autoplayDirection?e.nextSlide():'backwards'===e.settings.autoplayDirection&&e.previousSlide()},{passive:!0}),i.setAttribute('preload','metadata'),i.setAttribute('autoplay','autoplay')):i.paused&&i.play())}},s=t=>{const s=n.selectWithParent('module-pro-slider',t);if(0<s.length){const i={button:'bsp-slide-button',excerpt:'bsp-slide-excerpt',image:'sp-slide-image',video:'sp-video',thumbnails:'sp-thumbnail'},a={},o=()=>{const e=l.url+'sliderpro/',i=()=>{for(let t in a)if(!0!==r[t])return!1;var e=s;for(let t=e.length-1;-1<t;--t)n.imagesLoad(e[t],t=>{const e=(t=t.elements?t.elements[0]:t).getAttribute('data-slider-width'),i=t.getAttribute('data-slider-height'),s=t.getAttribute('data-autoplay'),a=t.getAttribute('data-thumbnail-width'),o=t.getAttribute('data-thumbnail-height'),l='1'===t.getAttribute('data-pause-last'),r={slideDistance:0,buttons:!t.classList.contains('pager-none')&&!t.classList.contains('pager-type-thumb'),arrows:!0,loop:'1'===t.getAttribute('data-loop'),responsive:!0,autoHeightOnReize:!0,autoHeight:!1,thumbnailTouchSwipe:!0,thumbnailWidth:a?parseFloat(a):'',thumbnailHeight:o?parseFloat(o):'',timer_bar:'yes'===t.getAttribute('data-timer-bar'),autoplayDelay:s&&'off'!==s?parseFloat(s):5e3,autoplay:'off'!==s,autoScaleLayers:!1,autoplayOnHover:t.getAttribute('data-hover-pause'),width:e&&'100%'!==e?parseInt(e):'100%',fadeOutPreviousSlide:!1,touchSwipe:n.isTouch&&'yes'===t.getAttribute('data-touch-swipe-mobile')||!n.isTouch&&'yes'===t.getAttribute('data-touch-swipe-desktop'),gotoSlide(s){s.index===this.slides.length-1&&!0===this.options.autoplay&&l&&!1===this.options.loop&&this.stopAutoplay();for(let i=0;i<2;++i){let t=s.index+i,e=this.getSlideAt(t);(e=e&&e.$slide[0])&&p(e,this)}},init(){p(this.getSlideAt(0).$slide[0],this);const t=this.instance,i=t.getElementsByClassName('bsp-slide-button');for(let e=i.length-1;-1<e;--e){let t=i[e].getAttribute('href');'#next-slide'!==t&&'#prev-slide'!==t||i[e].addEventListener('click',u)}t.classList.remove('tf_hidden','tf_lazy'),t.classList.add('tf_bsp_ready')}},d=(''===i?r.aspectRatio=1.9:r.height=i,t.getElementsByClassName('slider-pro')[0]);d.classList.contains('tf_bsp_ready')||$(d).sliderPro(r)})};for(let t in a)void 0===r[t]&&-1===t.indexOf('css_')&&n.LoadAsync(e+t+'.js',()=>{r[t]=!0,i(s)},d,null,()=>!!r[t]);i(s)};for(let t=s.length-1;-1<t;--t){(n.isTouch&&'yes'===s[t].getAttribute('data-touch-swipe-mobile')||!n.isTouch&&'yes'===s[t].getAttribute('data-touch-swipe-desktop'))&&!r.touchSwipe&&(a.touchSwipe=!0);for(let e in i)if(void 0!==s[t].getElementsByClassName(i[e])[0]){if(!n.cssLazy['bsp_'+e]){a['css_'+e]=!0;let t='video'===e?e+'.min':e;n.LoadCss(l.url+'modules/'+t+'.css',l.ver,null,null,()=>{r['css_'+e]=!0,n.cssLazy['bsp_'+e]=!0,o()})}'video'!==e&&'thumbnails'!==e||(r[e]||(a[e]=!0),'thumbnails'!==e||r.thumbnailtouchSwipe||!0!==a.touchSwipe&&!0!==r.touchSwipe||(a.thumbnailtouchSwipe=!0))}}r.twoSlidesFixer||2!==s.length||(a.twoSlidesFixer=!0),r.sliderPro?o():n.LoadAsync(l.url+'jquery.sliderPro.js',()=>{r.sliderPro=!0,o()},d,null,()=>void 0!==$.fn.sliderPro)}};n.is_builder_active&&n.body.on('tb_module_sort tb_grid_changed',(t,e)=>{s(e)}),n.on('builder_load_module_partial',(t,e,i)=>{!0===i&&!t[0].classList.contains('module-pro-slider')||s(t)})})(jQuery,Themify);